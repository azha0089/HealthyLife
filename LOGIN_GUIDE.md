# 登录注册系统使用指南

## 功能概述

本系统实现了完整的用户认证功能，包括：
- 用户登录和注册
- 基于角色的访问控制（用户/管理员）
- 路由守卫保护
- 表单验证

## 测试账户

系统预设了以下测试账户：

### 管理员账户
- **邮箱**: admin@google.com
- **密码**: 123456
- **角色**: admin
- **权限**: 可访问管理员面板和所有用户功能

### 普通用户账户
- **邮箱**: user@google.com
- **密码**: 123456
- **角色**: user
- **权限**: 可访问所有普通用户功能

## 功能特性

### 1. 登录页面 (`/login`)
- 邮箱和密码表单验证
- 必填字段验证
- 邮箱格式验证
- 密码长度验证（6-20位）
- 登录成功后根据角色自动跳转

### 2. 注册页面 (`/register`)
- 邮箱格式验证
- 密码强度验证（必须包含字母和数字）
- 确认密码验证
- 角色选择（用户/管理员）
- 用户协议同意验证
- 注册成功后自动登录

### 3. 路由守卫
- 未登录用户访问受保护页面时自动跳转到登录页
- 已登录用户访问登录/注册页面时自动跳转到首页
- 基于角色的页面访问控制
- 管理员专用路由保护

### 4. 用户状态管理
- 使用 Pinia 进行状态管理
- 登录状态持久化（localStorage）
- 页面刷新后状态保持

### 5. 导航栏集成
- 未登录时显示登录/注册按钮
- 已登录时显示用户下拉菜单
- 用户头像和邮箱显示
- 快速访问个人资料和管理面板
- 一键退出登录

## 页面访问权限

### 公开页面（无需登录）
- `/login` - 登录页面
- `/register` - 注册页面

### 需要登录的页面
- `/` - 首页
- `/learn` - 学习页面
- `/learn/macro` - 宏量营养素
- `/learn/vitamins` - 维生素
- `/events` - 活动页面
- `/profile` - 个人资料
- `/recipes/*` - 食谱相关页面

### 管理员专用页面
- `/admin` - 管理员面板

## 表单验证规则

### 登录表单
1. **邮箱**:
   - 必填
   - 正确的邮箱格式

2. **密码**:
   - 必填
   - 长度6-20位

### 注册表单
1. **邮箱**:
   - 必填
   - 正确的邮箱格式

2. **密码**:
   - 必填
   - 长度6-20位
   - 必须包含字母和数字

3. **确认密码**:
   - 必填
   - 必须与密码一致

4. **角色**:
   - 必选

5. **用户协议**:
   - 必须同意

## 技术实现

- **前端框架**: Vue 3 + Composition API
- **UI组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router 4
- **表单验证**: Element Plus 内置验证
- **样式**: Scoped CSS + 响应式设计

## 使用方法

1. 启动项目：`npm run dev`
2. 访问 `http://localhost:5173`
3. 点击导航栏的"登录"按钮
4. 使用测试账户登录或注册新账户
5. 体验不同角色的功能权限

## 安全特性

- 密码显示/隐藏切换
- 表单数据验证
- 路由级别的权限控制
- 用户状态安全管理
- 防止未授权访问
